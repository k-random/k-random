repos:
  - repo: https://github.com/google/keep-sorted
    rev: v0.5.1
    hooks:
      - id: keep-sorted
  # Use the project's Spotless configuration (Gradle) to avoid formatter/version drift.
  # This formats both Kotlin and Java consistently with the build.
  - repo: local
    hooks:
      - id: gradle-spotless-apply
        name: Gradle Spotless (apply)
        entry: ./gradlew
        language: system
        args: [ "-q", "spotlessApply" ]
        pass_filenames: false
        stages: [ pre-commit ]
  - repo: local
    hooks:
      - id: commit-msg
        name: conventional commit messages
        language: pygrep
        entry: '^((chore|test|feat|fix|build|docs|refactor)!?\(#\d+\): (?![A-Z])(?![a-z]+(ed|ing)\s).*)|(Rename .java to .kt)$'
        args: [ --multiline, --negate ] # fails if the entry is NOT matched
        stages: [ commit-msg ]